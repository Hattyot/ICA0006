---
  - name: init
    hosts: hp_servers
    become: yes
    roles:
      - init
      - hosts
      - journalctl
    tags: init

  - name: requirements
    hosts: hp_servers
    roles:
      - ntp
      - python
      - ssh
      - docker
    tags: pre-ceph

  - name: network
    hosts: cephadm
    roles:
      - cloudflare
      - letsencrypt
    tags: network

  - name: clean_lvm
    hosts: hp_servers
    roles:
      - lvm_clean
    tags:
      - clean
      - never

  - name: cephmgr requirements
    hosts: cephmgr
    roles:
      - keepalived
      - nginx_docker
      - ceph
    tags: cephmgr

  - name: cephadm
    hosts: cephadm
    roles:
      - cephadm
    tags: cephadm

  - name: cephadm_config
    hosts: cephmgr
    roles:
      - ceph_mgr
    tags: config

  - name: influxdb
    hosts: influxdb
    roles:
      - influxdb
      - telegraf
    tags: influxdb

  - name: logs
    hosts: hp_servers
    roles:
      - rsyslog
    tags: logs

  - name: rbd
    hosts: cephmgr
    roles:
      - rbd
    tags: rbd

  - name: full reset
    hosts: restart_server
    become: yes
    roles:
      - full_reset
    tags:
      - never
      - reset